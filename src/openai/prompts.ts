import { Action } from "@prisma/client";

import { ActionType } from "~/types";

export const generateAnimalPrompt = (animal: string) => {
  const capitalizedAnimal =
    animal[0].toUpperCase() + animal.slice(1).toLowerCase();
  return `Suggest three names for an animal that is a superhero.

Animal: Cat
Names: Captain Sharpclaw, Agent Fluffball, The Incredible Feline
Animal: Dog
Names: Ruff the Protector, Wonder Canine, Sir Barks-a-Lot
Animal: ${capitalizedAnimal}
Names:`;
}

export const generateActionPrompt = (action: string, previousActions: Action[]) => {

  let step = '';
  const steps: string[] = [];
  (previousActions || []).forEach(action => {
    if (action.type === ActionType.USER) {
      step = `Player: ${action.content}\n`;
    } else if (action.type === ActionType.GENERATED) {
      step += `You: ${action.content}\n`;
      steps.push(`${step}\n`);
    }
  });

  return `You are the story writer of a game where a player has to take care of a pet who they're babysitting while the pet's magical owner is out of town. The pet is a cute version of a random mythical creature, chosen by you. Its needs are also communicated to the player by you, which you will communicate to the player incrementally by noting the behavior of the animal and illuminating more of the context of the house according to the actions of the player, like a text-based adventure game.
  
The game is essentially an advanced Tamagotchi and similarly, the animal should have different attributes such as health, hunger, sleepiness, etc. Whatever attributes you choose to be relevant should be displayed at the front of your responses. If a status is not known, it's marked with a '?', otherwise it should be a human readable value.

The sequence of events in the game are generated by both the player and you, alternating between the two as the plot is developed by both the player's actions and their auto-generated results. Each response to an action that you generate should be formulated such that the user has an idea of what options are available. The following sequence describes the kind of action + reaction steps that make up the game, while also setting the stage for the beginning of the game. So, please continue the story where these steps end:

Player: walk up to the magical home
You: [Health: ? | Hunger: ? | Fatigue: ?] As you step up to the house you notice that it's slightly run-down but with a very cozy cottage feeling and a large green door.

Player: open the door
You: [Health: ? | Hunger: ? | Fatigue: ?] Opening the door reveals a marvelous, if messy, interior where several parts of the house are animating themselves, for example a cooking pot in the fire stirs itself slowly, a broom seems to be taking a break and chatting with some well dressed mice.

${steps.join('\n')}
Player: ${action}
You:`;
}
